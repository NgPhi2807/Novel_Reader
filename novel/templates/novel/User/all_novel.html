{% extends "base_user.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'novel/css/home.css' %}">
{% endblock %}

{% block content %}
<!-- Hero Section Begin -->
<section class="truyen">
  <div class="container">
    <!-- <div class="row mt-3">
        <div class="col-lg-12">
          <div class="breadcrumb__links">
            <a href="{% url 'user_home' %}"><i class="fa fa-home"></i> Home</a>
            <span class="current">{{novel.Name}}</span>
          </div>
        </div>
      </div> -->
    <section class="product">
      <div class="trending__product">
        <!-- Nội dung thực tế -->
        <div class="col-lg-12">
            <div id="trending-section" class="trending__product">
              <!-- Nội dung thực tế -->
              <div class="row">
                {% for novel in page_obj%}
                <div class="col-lg-2 col-md-4 col-sm-6 product__item ">
                  {%load static %}
                  <div class="product__item__pic set-bg" data-setbg="{% get_media_prefix %}{{novel.ImgUrl}}">
                    <div class="ep">{{ novel.chapters.count }} chương</div>
                    <p class="Name">{{novel.Name}}</p>
                  </div>
                  <div class="product__item__text">
                    <ul>
                      {% for category in novel.categorynovel_set.all|slice:":4" %}
                      <li>{{category.Category.Name}}</li>
                      {% endfor %}
                    </ul>
                  </div>
                  <a href="{% url 'user_novel_detail' novel.NovelId %}" class="full-link"></a>
                </div>
                {% endfor %}
              </div>
            </div>
          </div>
      </div>
    </section>

    <!-- Phân trang -->
    <div class="pagination mb-3 text-center">
      <span class="step-links">
          {% if page_obj.has_previous %}
          <a href="?page=1" class="pagination-link">
              <i class="fas fa-angle-double-left"></i> 
          </a>
          <a href="?page={{ page_obj.previous_page_number }}" class="pagination-link">
              <i class="fas fa-arrow-left"></i> 
          </a>
          {% endif %}

          {% for num in page_obj.paginator.page_range %}
              {% if num == page_obj.number %}
                  <span class="current-page">{{ num }}</span>
              {% else %}
                  <a href="?page={{ num }}" class="pagination-link">{{ num }}</a>
              {% endif %}
          {% endfor %}

          {% if page_obj.has_next %}
          <a href="?page={{ page_obj.next_page_number }}" class="pagination-link">
              <i class="fas fa-arrow-right"></i> 
          </a>
          <a href="?page={{ page_obj.paginator.num_pages }}" class="pagination-link">
              <i class="fas fa-angle-double-right"></i> 
          </a>
          {% endif %}
      </span>
    </div>
  </div>
</section>
<!-- Product Section End -->
{% endblock %}
